import{d as i,e as p,a as e,f as v,h as m,t as s,l as c,v as f,k as w,n as y,o as b,L as j}from"./app-DZXOPLfm.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"space-y-2 mb-4"},V={key:0,class:"mt-4 border-t pt-4"},_={key:0,class:"mt-2 text-sm text-green-500"},M={key:1,class:"mt-2 text-sm text-red-500"},N={__name:"Perfil",props:{darkMode:Boolean,trabajador:{type:Object,default:()=>({})}},setup(l){const r=i(!1),d=i(""),o=i(""),t=i({password_actual:"",password_nueva:"",password_nueva_confirmation:""});async function g(){d.value="",o.value="";try{await j.post("trabajador/cambiar-password",t.value),d.value="Contraseña actualizada correctamente.",t.value={password_actual:"",password_nueva:"",password_nueva_confirmation:""},r.value=!1}catch(n){n.response&&n.response.status===422?o.value=n.response.data.message||"La contraseña actual no es correcta.":n.response?.data?.message?o.value=n.response.data.message:o.value="Error al actualizar la contraseña."}}function x(){r.value=!1,d.value="",o.value="",t.value={password_actual:"",password_nueva:"",password_nueva_confirmation:""}}return(n,a)=>(b(),p("section",{class:y(["rounded-2xl shadow p-6 max-w-lg",l.darkMode?"bg-gray-800 text-gray-100":"bg-white text-gray-800"])},[a[13]||(a[13]=e("h3",{class:"text-xl font-bold text-blue-500 mb-4"},"Mi perfil",-1)),e("ul",C,[e("li",null,[a[4]||(a[4]=e("b",null,"Nombre:",-1)),m(" "+s(l.trabajador?.nombre_trabajador)+" "+s(l.trabajador?.apellido_trabajador),1)]),e("li",null,[a[5]||(a[5]=e("b",null,"Cargo:",-1)),m(" "+s(l.trabajador?.cargo_trabajador),1)]),e("li",null,[a[6]||(a[6]=e("b",null,"Teléfono:",-1)),m(" "+s(l.trabajador?.telefono_trabajador),1)]),e("li",null,[a[7]||(a[7]=e("b",null,"Tipo de contrato:",-1)),m(" "+s(l.trabajador?.tipo_contrato_trab),1)])]),e("button",{class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold",onClick:a[0]||(a[0]=u=>r.value=!r.value)},s(r.value?"Cancelar cambio de contraseña":"Cambiar contraseña"),1),r.value?(b(),p("div",V,[a[12]||(a[12]=e("h4",{class:"font-semibold mb-2 text-sm"},"Actualizar contraseña",-1)),e("form",{onSubmit:w(g,["prevent"]),class:"space-y-3"},[e("div",null,[a[8]||(a[8]=e("label",{class:"block text-sm mb-1"},"Contraseña actual",-1)),c(e("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=u=>t.value.password_actual=u),class:"input",required:""},null,512),[[f,t.value.password_actual]])]),e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm mb-1"},"Nueva contraseña",-1)),c(e("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=u=>t.value.password_nueva=u),class:"input",required:""},null,512),[[f,t.value.password_nueva]])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm mb-1"},"Confirmar nueva contraseña",-1)),c(e("input",{type:"password","onUpdate:modelValue":a[3]||(a[3]=u=>t.value.password_nueva_confirmation=u),class:"input",required:""},null,512),[[f,t.value.password_nueva_confirmation]])]),e("div",{class:"flex justify-end gap-2"},[e("button",{type:"button",class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-lg text-sm",onClick:x}," Cancelar "),a[11]||(a[11]=e("button",{type:"submit",class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm"}," Guardar nueva contraseña ",-1))])],32),d.value?(b(),p("p",_,s(d.value),1)):v("",!0),o.value?(b(),p("p",M,s(o.value),1)):v("",!0)])):v("",!0)],2))}},T=k(N,[["__scopeId","data-v-b24ff00a"]]);export{T as default};

import{d as b,A as k,H as h,e as a,a as o,h as x,t as f,n as d,N as p,L as v,o as n}from"./app-DZXOPLfm.js";const w={key:0},M={class:"mb-1"},L={class:"mb-2"},B={key:0,class:"mt-4"},E={key:1},V={__name:"Ubicacion",props:{darkMode:{type:Boolean,default:!1},proyecto:{type:Object,default:null}},setup(t){const s=t,i=b(null);let r=null,y=null;const l={lat:-17.8,lng:-63.2};async function m(){if(!(!i.value||!s.proyecto||!s.proyecto.direccion_pro)){r||(r=p.map(i.value).setView([l.lat,l.lng],13),p.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(r),y=p.marker([l.lat,l.lng]).addTo(r));try{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(s.proyecto.direccion_pro)}`,{data:e}=await v.get(c);if(e&&e.length){const{lat:u,lon:g}=e[0];r.setView([u,g],17),y.setLatLng([u,g])}}catch(c){console.error("Error geocodificando direcci贸n del proyecto (proveedor):",c)}}}return k(()=>{m()}),h(()=>s.proyecto,()=>{m()}),(c,e)=>(n(),a("section",{class:d(["rounded-2xl shadow p-6 max-w-3xl transition-colors duration-300",t.darkMode?"bg-gray-800 text-gray-100":"bg-white text-gray-800"])},[e[3]||(e[3]=o("h3",{class:"text-xl font-bold text-blue-500 mb-4"}," Ubicaci贸n del proyecto",-1)),t.proyecto?(n(),a("div",w,[o("p",M,[e[0]||(e[0]=o("b",null,"Proyecto:",-1)),x(" "+f(t.proyecto.nombre_pro),1)]),o("p",L,[e[1]||(e[1]=o("b",null,"Direcci贸n registrada:",-1)),x(" "+f(t.proyecto.direccion_pro||"Sin direcci贸n registrada."),1)]),t.proyecto.direccion_pro?(n(),a("div",B,[o("div",{ref_key:"mapRef",ref:i,class:"w-full h-64 rounded-xl border border-gray-300 overflow-hidden"},null,512),e[2]||(e[2]=o("p",{class:"mt-1 text-xs text-gray-500"}," Mapa de referencia (OpenStreetMap). El pin azul indica la direcci贸n del proyecto. ",-1))])):(n(),a("p",{key:1,class:d(["text-sm mt-2",t.darkMode?"text-gray-300":"text-gray-600"])}," El proyecto no tiene una direcci贸n registrada, por lo que no se puede mostrar en el mapa. ",2))])):(n(),a("div",E,[o("p",{class:d(t.darkMode?"text-gray-300":"text-gray-600")}," A煤n no se encontr贸 un proyecto relacionado con el propietario de este proveedor. ",2)]))],2))}};export{V as default};

import{d as x,A as k,e as s,a as o,f as v,h as r,t as n,n as u,N as y,L as w,o as c}from"./app-DZXOPLfm.js";const M={key:0},E={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},L={class:"space-y-1"},N={class:"space-y-1"},V={key:0,class:"mt-4"},C={__name:"Proyecto",props:{darkMode:Boolean,proyecto:{type:Object,default:null}},setup(t){const l=t,p=x(null);let a=null,b=null;const i={lat:-17.8,lng:-63.2};async function f(){if(!(!p.value||!l.proyecto||!l.proyecto.direccion_pro)){a||(a=y.map(p.value).setView([i.lat,i.lng],13),y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(a),b=y.marker([i.lat,i.lng]).addTo(a));try{const d=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(l.proyecto.direccion_pro)}`,{data:e}=await w.get(d);if(e&&e.length){const{lat:m,lon:g}=e[0];a.setView([m,g],17),b.setLatLng([m,g])}}catch(d){console.error("Error geocodificando dirección del proyecto:",d)}}}return k(()=>{l.proyecto&&l.proyecto.direccion_pro&&f()}),(d,e)=>(c(),s("section",{class:u(["rounded-2xl shadow p-6",t.darkMode?"bg-gray-800 text-gray-100":"bg-white text-gray-800"])},[e[10]||(e[10]=o("h3",{class:"text-xl font-bold text-blue-500 mb-4"},"Proyecto asignado",-1)),t.proyecto?(c(),s("div",M,[o("div",E,[o("div",L,[o("p",null,[e[0]||(e[0]=o("b",null,"Nombre del proyecto:",-1)),r(" "+n(t.proyecto.nombre_pro),1)]),o("p",null,[e[1]||(e[1]=o("b",null,"Estado:",-1)),r(" "+n(t.proyecto.estado_proyecto),1)]),o("p",null,[e[2]||(e[2]=o("b",null,"Dirección:",-1)),r(" "+n(t.proyecto.direccion_pro),1)])]),o("div",N,[o("p",null,[e[3]||(e[3]=o("b",null,"Fecha inicio:",-1)),r(" "+n(t.proyecto.fecha_inicio_pro),1)]),o("p",null,[e[4]||(e[4]=o("b",null,"Fecha fin:",-1)),r(" "+n(t.proyecto.fecha_fin_pro),1)]),o("p",null,[e[5]||(e[5]=o("b",null,"ID proyecto:",-1)),r(" "+n(t.proyecto.id_proyecto),1)])])]),o("div",{class:u(["p-3 rounded text-sm mb-4",t.darkMode?"bg-blue-900/40 border border-blue-700":"bg-blue-50 border-l-4 border-blue-400"])},[e[6]||(e[6]=o("b",null,"Descripción:",-1)),e[7]||(e[7]=o("br",null,null,-1)),r(" "+n(t.proyecto.descripcion_pro||"Sin descripción registrada."),1)],2),t.proyecto.direccion_pro?(c(),s("div",V,[e[8]||(e[8]=o("h4",{class:"font-semibold mb-2"},"Ubicación en mapa",-1)),o("div",{ref_key:"mapRef",ref:p,class:"w-full h-64 rounded-xl border border-gray-300 overflow-hidden"},null,512),e[9]||(e[9]=o("p",{class:"mt-1 text-xs text-gray-500"}," Mapa de referencia (OpenStreetMap). El marcador indica la dirección registrada. ",-1))])):v("",!0)])):(c(),s("div",{key:1,class:u(["p-4 rounded text-sm",t.darkMode?"bg-yellow-900/40 border border-yellow-700":"bg-yellow-50 border-l-4 border-yellow-400"])}," Todavía no tienes un proyecto asignado o no se encontró la asignación reciente. ",2))],2))}};export{C as default};

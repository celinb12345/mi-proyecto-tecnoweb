import{y as F,d as c,q as S,e as u,a as o,f as x,n,t as B,g as t,l as b,v as y,k as z,o as g,L as I}from"./app-DZXOPLfm.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex justify-end mb-4"},T=["value"],$=["value"],O=["readonly"],R=["readonly"],q=["readonly"],A=["readonly"],G=["readonly"],W={class:"md:col-span-2"},H={class:"flex flex-col md:flex-row gap-6 items-start"},J=["src"],K={key:0,class:"flex-1"},Q={key:0,class:"md:col-span-2 flex justify-end"},X={__name:"Perfil",props:{darkMode:{type:Boolean,default:!1},fontClass:{type:String,default:"font-sans"}},setup(U){const C="https://www.tecnoweb.org.bo/inf513/grupo06cc/metaluv-camiri/public/".replace(/\/$/,""),_=s=>{if(!s)return null;const e=String(s);return e.startsWith("http")?e:`${C}/storage/${e}`},{props:j}=F(),w=j.user||{},p=w.propietario||{},k=U,r=k.darkMode,M=k.fontClass,a=c({id_propietario:p.id_propietario||"",id_usuario:w.id_usuario||p.id_usuario||"",nombre_propietario:p.nombre_propietario||"",apellido_propietario:p.apellido_propietario||"",correo_propietario:p.correo_propietario||"",telefono_propietario:p.telefono_propietario||"",direccion_propietario:p.direccion_propietario||"",especialidad_propietario:p.especialidad_propietario||"",foto_propietario:p.foto_propietario||null}),l=c(!1),f=c(null),d=c(""),v=c("text-green-400"),h=S(()=>_(a.value.foto_propietario)),m=c(h.value);function P(s){const e=s.target.files[0];e&&(f.value=e,m.value=URL.createObjectURL(e))}function V(){l.value=!0,d.value=""}function E(){l.value=!1,d.value="",m.value=h.value}async function D(){d.value="",v.value=r?"text-green-300":"text-green-600";const s=new FormData;s.append("nombre_propietario",a.value.nombre_propietario),s.append("apellido_propietario",a.value.apellido_propietario),s.append("correo_propietario",a.value.correo_propietario||""),s.append("telefono_propietario",a.value.telefono_propietario||""),s.append("direccion_propietario",a.value.direccion_propietario||""),s.append("especialidad_propietario",a.value.especialidad_propietario||""),f.value&&s.append("foto",f.value);try{const e=await I.post("propietario/Construccion/perfil",s,{headers:{"Content-Type":"multipart/form-data"}});if(e.data.success){d.value=e.data.message,v.value=r?"text-green-300":"text-green-600";const i=e.data.propietario;Object.assign(a.value,i),m.value=_(i.foto_propietario),l.value=!1}else d.value="Error al actualizar el perfil",v.value=r?"text-red-300":"text-red-600"}catch(e){console.error(e),d.value="Error al actualizar el perfil",v.value=r?"text-red-300":"text-red-600"}}return(s,e)=>(g(),u("div",{class:n(["p-8 rounded-2xl shadow-md max-w-4xl mx-auto transition-colors duration-300",t(r)?"bg-gray-800 text-gray-100":"bg-white text-gray-900",t(M)])},[e[16]||(e[16]=o("h2",{class:"text-2xl font-bold text-blue-500 mb-6"},"Mi Perfil (Melamina)",-1)),d.value?(g(),u("p",{key:0,class:n(["mb-4 font-semibold",v.value])},B(d.value),3)):x("",!0),o("div",N,[l.value?(g(),u("button",{key:1,onClick:E,class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded-lg font-semibold"}," Cancelar ")):(g(),u("button",{key:0,onClick:V,class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-semibold"}," Editar "))]),o("form",{onSubmit:z(D,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[e[6]||(e[6]=o("label",{class:"block text-sm font-semibold mb-1"},"ID Propietario",-1)),o("input",{type:"text",value:a.value.id_propietario,readonly:"",class:n(["input",t(r)?"bg-gray-900 border-gray-700 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800","cursor-not-allowed"])},null,10,T)]),o("div",null,[e[7]||(e[7]=o("label",{class:"block text-sm font-semibold mb-1"},"ID Usuario",-1)),o("input",{type:"text",value:a.value.id_usuario,readonly:"",class:n(["input",t(r)?"bg-gray-900 border-gray-700 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800","cursor-not-allowed"])},null,10,$)]),o("div",null,[e[8]||(e[8]=o("label",{class:"block text-sm font-semibold mb-1"},"Nombre",-1)),b(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>a.value.nombre_propietario=i),readonly:!l.value,class:n(["input",t(r)?"border-gray-700 text-gray-100 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400",l.value?t(r)?"bg-gray-900":"bg-white":t(r)?"bg-gray-900 cursor-not-allowed":"bg-gray-100 cursor-not-allowed"])},null,10,O),[[y,a.value.nombre_propietario]])]),o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-semibold mb-1"},"Apellido",-1)),b(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>a.value.apellido_propietario=i),readonly:!l.value,class:n(["input",t(r)?"border-gray-700 text-gray-100 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400",l.value?t(r)?"bg-gray-900":"bg-white":t(r)?"bg-gray-900 cursor-not-allowed":"bg-gray-100 cursor-not-allowed"])},null,10,R),[[y,a.value.apellido_propietario]])]),o("div",null,[e[10]||(e[10]=o("label",{class:"block text-sm font-semibold mb-1"},"Correo",-1)),b(o("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=i=>a.value.correo_propietario=i),readonly:!l.value,class:n(["input",t(r)?"border-gray-700 text-gray-100 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400",l.value?t(r)?"bg-gray-900":"bg-white":t(r)?"bg-gray-900 cursor-not-allowed":"bg-gray-100 cursor-not-allowed"])},null,10,q),[[y,a.value.correo_propietario]])]),o("div",null,[e[11]||(e[11]=o("label",{class:"block text-sm font-semibold mb-1"},"Teléfono",-1)),b(o("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>a.value.telefono_propietario=i),readonly:!l.value,class:n(["input",t(r)?"border-gray-700 text-gray-100 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400",l.value?t(r)?"bg-gray-900":"bg-white":t(r)?"bg-gray-900 cursor-not-allowed":"bg-gray-100 cursor-not-allowed"])},null,10,A),[[y,a.value.telefono_propietario]])]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-semibold mb-1"},"Dirección",-1)),b(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>a.value.direccion_propietario=i),readonly:!l.value,class:n(["input",t(r)?"border-gray-700 text-gray-100 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400",l.value?t(r)?"bg-gray-900":"bg-white":t(r)?"bg-gray-900 cursor-not-allowed":"bg-gray-100 cursor-not-allowed"])},null,10,G),[[y,a.value.direccion_propietario]])]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-semibold mb-1"},"Especialidad",-1)),b(o("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=i=>a.value.especialidad_propietario=i),readonly:"",class:n(["input",t(r)?"bg-gray-900 border-gray-700 text-gray-200":"bg-gray-100 border-gray-300 text-gray-800","cursor-not-allowed"])},null,2),[[y,a.value.especialidad_propietario]])]),o("div",W,[e[14]||(e[14]=o("label",{class:"block text-sm font-semibold mb-2"},"Foto",-1)),o("div",H,[o("div",{class:n(["w-32 h-32 rounded-full overflow-hidden border flex items-center justify-center",t(r)?"bg-gray-900 border-gray-700":"bg-gray-100 border-gray-300"])},[m.value?(g(),u("img",{key:0,src:m.value,alt:"Foto del propietario",class:"w-full h-full object-cover"},null,8,J)):(g(),u("span",{key:1,class:n(["text-xs text-center px-2",(t(r),"text-gray-400")])}," Sin foto ",2))],2),l.value?(g(),u("div",K,[o("input",{type:"file",accept:"image/*",onChange:P,class:n(["block w-full text-sm",t(r)?"text-gray-200":"text-gray-700"])},null,34),o("p",{class:n(["text-xs mt-1",t(r)?"text-gray-300":"text-gray-500"])}," Selecciona una nueva foto (máx. 2MB) ",2)])):x("",!0)])]),l.value?(g(),u("div",Q,[...e[15]||(e[15]=[o("button",{type:"submit",class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold"}," Guardar cambios ",-1)])])):x("",!0)],32)],2))}},ee=L(X,[["__scopeId","data-v-59ea4ece"]]);export{ee as default};

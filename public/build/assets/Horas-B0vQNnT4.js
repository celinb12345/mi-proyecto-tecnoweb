import{d as V,q as i,e as o,a as s,t as n,l as A,K as _,F as p,i as f,h as j,n as x,o as r,f as S}from"./app-DZXOPLfm.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"text-xl font-bold text-blue-500 mb-4"},Y={class:"flex flex-wrap items-end gap-4 mb-4"},z=["value"],I=["value"],U={class:"mb-4"},$={class:"overflow-x-auto"},q={class:"inline-grid grid-cols-7 gap-1 text-center text-xs min-w-[280px]"},K={key:0,class:"font-bold text-sm"},W={key:1},X={__name:"Horas",props:{darkMode:Boolean,asistencias:{type:Array,default:()=>[]},mesActual:{type:String,default:null}},setup(d){const m=d,F=["L","M","X","J","V","S","D"],h=new Date;let v=h.getFullYear(),k=h.getMonth()+1;if(m.mesActual&&m.mesActual.includes("-")){const[a,t]=m.mesActual.split("-").map(Number);!Number.isNaN(a)&&!Number.isNaN(t)&&(v=a,k=t)}const c=V(v),b=V(k),w=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],O=i(()=>{const a=[],t=v-3,e=v+1;for(let l=t;l<=e;l++)a.push(l);return a}),g=i(()=>(m.asistencias||[]).filter(a=>{if(!a.fecha)return!1;const[t,e]=a.fecha.split("-").map(Number);return t===c.value&&e===b.value})),H=i(()=>{const a=new Map;return(g.value||[]).forEach(t=>{a.set(t.fecha,Number(t.horas||0))}),a}),B=i(()=>{const a=c.value,t=b.value,e=new Date(a,t-1,1),l=new Date(a,t,0),y=[],C=(e.getDay()+6)%7;for(let u=0;u<C;u++)y.push({esVacio:!0});for(let u=1;u<=l.getDate();u++){const N=new Date(a,t-1,u).toISOString().slice(0,10),D=H.value.get(N)||0,E=D>=8;y.push({esVacio:!1,numero:u,fecha:N,horas:D,worked:E})}return y}),M=i(()=>{const a=(g.value||[]).filter(e=>Number(e.horas||0)>0).length,t=(g.value||[]).reduce((e,l)=>e+Number(l.horas||0),0);return{diasTrabajados:a,totalHoras:t}}),T=i(()=>{const a=w.find(t=>t.value===b.value);return`${a?a.label:""} ${c.value}`});return(a,t)=>(r(),o("section",{class:x(["rounded-2xl shadow p-6",d.darkMode?"bg-gray-800 text-gray-100":"bg-white text-gray-800"])},[s("h3",L," Horas trabajadas – "+n(T.value),1),s("div",Y,[s("div",null,[t[2]||(t[2]=s("label",{class:"block text-sm mb-1"},"Año",-1)),A(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),class:"input w-28"},[(r(!0),o(p,null,f(O.value,e=>(r(),o("option",{key:e,value:e},n(e),9,z))),128))],512),[[_,c.value,void 0,{number:!0}]])]),s("div",null,[t[3]||(t[3]=s("label",{class:"block text-sm mb-1"},"Mes",-1)),A(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),class:"input w-36"},[(r(),o(p,null,f(w,e=>s("option",{key:e.value,value:e.value},n(e.label),9,I)),64))],512),[[_,b.value,void 0,{number:!0}]])])]),s("div",U,[s("p",null,[t[4]||(t[4]=s("b",null,"Días trabajados:",-1)),j(" "+n(M.value.diasTrabajados),1)]),s("p",null,[t[5]||(t[5]=s("b",null,"Total horas:",-1)),j(" "+n(M.value.totalHoras),1)])]),s("div",$,[s("div",q,[(r(),o(p,null,f(F,e=>s("div",{key:e,class:x(["font-semibold py-1",d.darkMode?"text-gray-300":"text-gray-600"])},n(e),3)),64)),(r(!0),o(p,null,f(B.value,(e,l)=>(r(),o("div",{key:l,class:x(["flex flex-col items-center justify-center rounded-lg border text-[10px] px-1 py-1 min-w-[40px] min-h-[40px]",e.esVacio?"bg-transparent border-transparent":e.worked?"bg-green-500 text-white border-green-600":d.darkMode?"bg-red-900/40 text-red-200 border-red-700":"bg-red-100 text-red-700 border-red-300"])},[e.esVacio?S("",!0):(r(),o("span",K,n(e.numero),1)),e.esVacio?S("",!0):(r(),o("span",W,n(e.worked?"Asistió":"Falta"),1))],2))),128))])]),s("p",{class:x(["mt-3 text-xs",d.darkMode?"text-gray-400":"text-gray-500"])}," * Los días en verde tienen asistencia registrada; los días en rojo no tienen registro en ese mes. ",2)],2))}},R=J(X,[["__scopeId","data-v-a2c95bb1"]]);export{R as default};
